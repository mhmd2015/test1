<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Workflow Designer</title>
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- 3. Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class', // Enable dark mode using a class
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'brand-primary': '#1e40af', // Example primary color
                        'brand-secondary': '#3b82f6',
                        'dark-bg': '#0f172a',
                        'dark-nav': '#1e293b',
                        'dark-card': '#334155',
                        'dark-border': '#475569',
                    }
                }
            }
        }
    </script>
    
    <!-- 4. Custom Styles -->
    <style>
        /* Simple scrollbar for dark mode */
        .dark ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .dark ::-webkit-scrollbar-thumb {
            background-color: #475569;
            border-radius: 20px;
        }
    </style>
</head>

<body class="bg-white dark:bg-dark-bg text-gray-900 dark:text-gray-100 font-sans antialiased">

    <!-- App Container -->
    <div class="flex flex-col h-screen">

        <!-- ======================================= -->
        <!-- 1. Top Section (Header & Nav)           -->
        <!-- ======================================= -->
        <header class="bg-white dark:bg-dark-nav border-b border-gray-200 dark:border-dark-border shadow-sm sticky top-0 z-30">
            <!-- Top Bar -->
            <div class="container mx-auto px-4 h-16 flex justify-between items-center">
                <!-- Left Side: Logo & Title -->
                <div class="flex items-center space-x-4">
                    <!-- Logo "M" -->
                    <div class="w-10 h-10 bg-brand-primary rounded-lg flex items-center justify-center text-white text-xl font-bold">
                        M
                    </div>
                    <span class="text-xl font-semibold text-gray-800 dark:text-white">Workflow</span>
                </div>
                
                <!-- Right Side: Buttons -->
                <div class="flex items-center space-x-4">
                    <!-- Dark/Light Mode Toggle -->
                    <button id="theme-toggle" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-card">
                        <!-- Sun Icon -->
                        <svg id="theme-icon-light" class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-6.364-.386l1.591-1.591M3 12h2.25m.386-6.364l1.591 1.591" />
                        </svg>
                        <!-- Moon Icon (hidden by default) -->
                        <svg id="theme-icon-dark" class="w-5 h-5 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25c0 5.385 4.365 9.75 9.75 9.75 2.57 0 4.88-.985 6.697-2.602z" />
                        </svg>
                    </button>
                    <!-- Login Button -->
                    <button class="bg-brand-primary hover:bg-brand-secondary text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Login
                    </button>
                </div>
            </div>
            
            <!-- Bottom Bar (Sub-menu) -->
            <nav class="container mx-auto px-4 h-12 flex items-center space-x-6">
                <a href="#" class="text-sm font-medium text-brand-primary border-b-2 border-brand-primary">Dashboard</a>
                <a href="#" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">Workflow</a>
                <a href="#" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">Deployments</a>
                <a href="#" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">Connections</a>
                <a href="#" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">Assets</a>
                <a href="#" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">Datasets</a>
            </nav>
        </header>

        <!-- Main Content Area (Layout for sections 2, 3, 4) -->
        <div class="flex-1 flex overflow-hidden">

            <!-- ======================================= -->
            <!-- 2. Left Side (Available Blocks)         -->
            <!-- ======================================= -->
            <aside class="w-72 bg-white dark:bg-dark-nav border-r border-gray-200 dark:border-dark-border p-4 overflow-y-auto flex-shrink-0">
                <h2 class="text-lg font-semibold mb-4">Available Blocks</h2>
                
                <!-- Accordion Group -->
                <div class="space-y-2">
                    <!-- Logic Operators -->
                    <div class="accordion-item">
                        <button class="accordion-header flex justify-between items-center w-full p-2 rounded-lg text-left text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-card">
                            <span>LOGIC OPERATORS</span>
                            <svg class="accordion-icon w-4 h-4 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content hidden pl-2 pt-2 space-y-2">
                            <div class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-card cursor-pointer">
                                <div class="p-1 bg-blue-100 rounded-md"><svg class="w-5 h-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg></div>
                                <div>
                                    <div class="text-sm font-medium">Choice</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Add if-else logic</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-card cursor-pointer">
                                <div class="p-1 bg-green-100 rounded-md"><svg class="w-5 h-5 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg></div>
                                <div>
                                    <div class="text-sm font-medium">Map</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Parallel workflow</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Agent Management -->
                    <div class="accordion-item">
                        <button class="accordion-header flex justify-between items-center w-full p-2 rounded-lg text-left text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-card">
                            <span>AGENT MANAGEMENT</span>
                            <svg class="accordion-icon w-4 h-4 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content hidden pl-2 pt-2 space-y-2">
                             <div class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-card cursor-pointer">
                                <div class="p-1 bg-purple-100 rounded-md"><svg class="w-5 h-5 text-purple-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" /></svg></div>
                                <div>
                                    <div class="text-sm font-medium">Adaptive Orchestrator</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Coordinates agents</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Agents -->
                    <div class="accordion-item">
                        <button class="accordion-header flex justify-between items-center w-full p-2 rounded-lg text-left text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-card">
                            <span>AGENTS</span>
                            <svg class="accordion-icon w-4 h-4 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content hidden pl-2 pt-2 space-y-2">
                            <!-- Simple Agent -->
                            <div class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-card cursor-pointer">
                                <div class="p-1 bg-indigo-100 rounded-md"><svg class="w-5 h-5 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.624L16.5 21.75l-.398-1.126a3.375 3.375 0 00-2.456-2.456L12.75 18l1.126-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.126a3.375 3.375 0 002.456 2.456L20.25 18l-1.126.398a3.375 3.375 0 00-2.456 2.456z" /></svg></div>
                                <div>
                                    <div class="text-sm font-medium">Simple Agent</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Performs simple tasks</div>
                                </div>
                            </div>
                             <!-- ReAct Agent -->
                            <div class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-card cursor-pointer">
                                <div class="p-1 bg-pink-100 rounded-md"><svg class="w-5 h-5 text-pink-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg></div>
                                <div>
                                    <div class="text-sm font-medium">ReAct Agent</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Handles complex tasks</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- ======================================= -->
            <!-- 3. Main Content (Block Designer)        -->
            <!-- ======================================= -->
            <main class="flex-1 overflow-auto p-8 bg-gray-50 dark:bg-gray-900">
                <div class="max-w-2xl mx-auto flex flex-col items-center space-y-4">
                    <!-- Start Block -->
                    <div class="bg-black text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg">
                        Start
                    </div>
                    
                    <!-- Vertical Connector -->
                    <div class="w-0.5 h-8 bg-gray-300 dark:bg-gray-600"></div>

                    <!-- Workflow Block (Clickable) -->
                    <div class="workflow-block w-full bg-white dark:bg-dark-nav border border-gray-200 dark:border-dark-border rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                        <div class="p-4 border-b border-gray-200 dark:border-dark-border">
                            <div class="flex items-center space-x-3">
                                <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-md">
                                     <svg class="w-6 h-6 text-purple-600 dark:text-purple-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" /></svg>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800 dark:text-white">Adaptive Orchestrator</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">SmartFlow</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <!-- Placeholder for inner blocks -->
                            <div class="font-medium text-sm text-gray-600 dark:text-gray-300">Agents</div>
                            <div class="p-3 bg-gray-50 dark:bg-dark-card rounded-lg border border-gray-200 dark:border-dark-border">
                                <span class="text-sm">ReAct: Customer Support</span>
                            </div>
                            
                            <div class="font-medium text-sm text-gray-600 dark:text-gray-300">Tools</div>
                            <div class="p-3 bg-gray-50 dark:bg-dark-card rounded-lg border border-gray-200 dark:border-dark-border">
                                <span class="text-sm">Tool: Search Tavily</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Vertical Connector -->
                    <div class="w-0.5 h-8 bg-gray-300 dark:bg-gray-600"></div>

                    <!-- Another Workflow Block (Clickable) -->
                     <div class="workflow-block w-full bg-white dark:bg-dark-nav border border-gray-200 dark:border-dark-border rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                        <div class="p-4">
                            <div class="flex items-center space-x-3">
                                <div class="p-2 bg-indigo-100 dark:bg-indigo-900 rounded-md">
                                     <svg class="w-6 h-6 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.624L16.5 21.75l-.398-1.126a3.375 3.375 0 00-2.456-2.456L12.75 18l1.126-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.126a3.375 3.375 0 002.456 2.456L20.25 18l-1.126.398a3.375 3.375 0 00-2.456 2.456z" /></svg>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800 dark:text-white">Manager Agent</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">DataOperationsManager</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </main>

            <!-- ======================================= -->
            <!-- 4. Right Pane (Properties) - Hidden     -->
            <!-- ======================================= -->
            <aside id="properties-pane" class="w-96 bg-white dark:bg-dark-nav border-l border-gray-200 dark:border-dark-border p-6 overflow-y-auto flex-shrink-0 hidden">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold">Manager Agent</h2>
                    <button id="close-properties" class="p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-card">
                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
                
                <!-- Tabs -->
                <div class="border-b border-gray-200 dark:border-dark-border">
                    <nav class="flex space-x-4 -mb-px" id="properties-tabs">
                        <button data-tab="config" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-brand-primary text-brand-primary">
                            Configuration
                        </button>
                        <button data-tab="input" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600">
                            Input
                        </button>
                        <button data-tab="output" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600">
                            Output
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div class="mt-6 space-y-6">
                    <!-- Configuration Content (Default) -->
                    <div id="tab-content-config" class="tab-content space-y-4">
                        <div>
                            <label for="state-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">State name</label>
                            <input type="text" id="state-name" value="DataOperationsManager" class="mt-1 block w-full rounded-md border-gray-300 dark:border-dark-border shadow-sm bg-white dark:bg-dark-card focus:border-brand-primary focus:ring-brand-primary sm:text-sm">
                        </div>
                         <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Sequential Planner Prompt</label>
                            <textarea rows="4" class="mt-1 block w-full rounded-md border-gray-300 dark:border-dark-border shadow-sm bg-white dark:bg-dark-card focus:border-brand-primary focus:ring-brand-primary sm:text-sm p-2">Please create a detailed plan for the following task. Ensure that each step is clear...</textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Sequential Final Prompt</label>
                            <textarea rows="3" class="mt-1 block w-full rounded-md border-gray-300 dark:border-dark-border shadow-sm bg-white dark:bg-dark-card focus:border-brand-primary focus:ring-brand-primary sm:text-sm p-2">Summarize the results of the completed tasks...</textarea>
                        </div>
                    </div>
                    
                    <!-- Input Content (Hidden) -->
                    <div id="tab-content-input" class="tab-content hidden">
                        <p class="text-gray-600 dark:text-gray-400">Input parameters for this block will be configured here.</p>
                    </div>

                    <!-- Output Content (Hidden) -->
                    <div id="tab-content-output" class="tab-content hidden">
                        <p class="text-gray-600 dark:text-gray-400">Output data from this block will be configured here.</p>
                    </div>
                </div>

            </aside>
        </div>
        
        <!-- ======================================= -->
        <!-- 5. Footer                               -->
        <!-- ======================================= -->
        <footer class="bg-gray-50 dark:bg-dark-bg border-t border-gray-200 dark:border-dark-border p-4">
            <div class="container mx-auto flex justify-between items-center text-sm text-gray-600 dark:text-gray-400">
                <div>
                    &copy; 2025 AI Workflows, Inc. All rights reserved.
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="hover:text-brand-primary">Terms of Service</a>
                    <a href="#" class="hover:text-brand-primary">Privacy Policy</a>
                    <a href="#" class="hover:text-brand-primary">Contact</a>
                </div>
            </div>
        </footer>
    </div>


    <!-- ======================================= -->
    <!-- JavaScript (jQuery)                     -->
    <!-- ======================================= -->
    <script>
        $(document).ready(function() {
            
            // --- 1. Dark/Light Mode Toggle ---
            const $themeToggle = $('#theme-toggle');
            const $lightIcon = $('#theme-icon-light');
            const $darkIcon = $('#theme-icon-dark');

            // Check for saved theme in localStorage
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                $('html').addClass('dark');
                $lightIcon.addClass('hidden');
                $darkIcon.removeClass('hidden');
            } else {
                $('html').removeClass('dark');
                $lightIcon.removeClass('hidden');
                $darkIcon.addClass('hidden');
            }

            $themeToggle.on('click', function() {
                // Toggle class on <html>
                $('html').toggleClass('dark');
                
                // Toggle icons
                $lightIcon.toggleClass('hidden');
                $darkIcon.toggleClass('hidden');

                // Save preference
                if ($('html').hasClass('dark')) {
                    localStorage.theme = 'dark';
                } else {
                    localStorage.theme = 'light';
                }
            });

            
            // --- 2. Left Pane Accordions ---
            $('.accordion-header').on('click', function() {
                const $content = $(this).next('.accordion-content');
                const $icon = $(this).find('.accordion-icon');
                
                $content.slideToggle(200);
                $icon.toggleClass('rotate-180');
                
                // Optional: Close other accordions
                // $('.accordion-content').not($content).slideUp(200);
                // $('.accordion-icon').not($icon).removeClass('rotate-180');
            });
            
            
            // --- 3. Show Right Properties Pane ---
            $('.workflow-block').on('click', function() {
                // Highlight selected block (optional)
                $('.workflow-block').removeClass('border-brand-primary ring-2 ring-brand-primary');
                $(this).addClass('border-brand-primary ring-2 ring-brand-primary');
                
                // Show the pane
                $('#properties-pane').removeClass('hidden');
            });

            
            // --- 4. Close Right Properties Pane ---
            $('#close-properties').on('click', function() {
                $('#properties-pane').addClass('hidden');
                // Remove highlight from all blocks
                $('.workflow-block').removeClass('border-brand-primary ring-2 ring-brand-primary');
            });


            // --- 5. Right Pane Tabs ---
            $('#properties-tabs .tab-btn').on('click', function() {
                const tabId = $(this).data('tab');

                // Update tab button styles
                $('#properties-tabs .tab-btn').removeClass('border-brand-primary text-brand-primary').addClass('border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600');
                $(this).removeClass('border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600').addClass('border-brand-primary text-brand-primary');

                // Show/hide tab content
                $('.tab-content').addClass('hidden');
                $('#tab-content-' + tabId).removeClass('hidden');
            });
            
        });
    </script>

</body>
</html>
